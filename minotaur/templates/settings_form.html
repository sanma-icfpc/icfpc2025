<form class="space-y-3" onsubmit="return submitSettings(event)">
  <div>
    <label class="block text-sm font-medium text-gray-800">公式ベースURL（OFFICIAL_BASE）</label>
    <input class="w-full border rounded p-2 mt-1" placeholder="例: https://example.com" type="text" name="OFFICIAL_BASE" value="{{ official_base or '' }}" />
    <p class="text-xs text-gray-500 mt-1">上流（公式）APIのベースURL。未設定または空欄のときはMOCKモードで動作します。</p>
    <div class="mt-2 flex items-center flex-wrap gap-2">
      <button type="button" class="px-2 py-1 text-xs bg-gray-200 rounded"
              onclick="const f=this.closest('form'); if (f) { const i=f.querySelector('input[name=OFFICIAL_BASE]'); if (i) i.value='http://127.0.0.1:8009/'; }">
        http://127.0.0.1:8009/
      </button>
      <span class="text-xs text-gray-400 mr-2">(local)</span>
      <button type="button" class="ml-2 px-2 py-1 text-xs bg-gray-200 rounded"
              onclick="const f=this.closest('form'); if (f) { const i=f.querySelector('input[name=OFFICIAL_BASE]'); if (i) i.value='https://31pwr5t6ij.execute-api.eu-west-2.amazonaws.com/'; }">
        https://31pwr5t6ij.execute-api.eu-west-2.amazonaws.com/
      </button>
      <span class="text-xs text-gray-400">(official)</span>
    </div>
  </div>
  <div>
    <label class="block text-sm font-medium text-gray-800">自動再起動のメモリしきい値（RSS_REBOOT_MB, MB）</label>
    <input class="w-full border rounded p-2 mt-1" type="number" min="0" step="1" name="RSS_REBOOT_MB" value="{{ rss_reboot_mb }}" />
    <p class="text-xs text-gray-500 mt-1">RSS がこの値（MB）を超えた後、実行中の試行が無いタイミングでプロセスを終了します（0 で無効）。外部の監視・再起動により自動的に再起動される想定です。デフォルト: 600MB。</p>
  </div>
  <div>
    <label class="block text-sm font-medium text-gray-800">トライアルのリース秒数（TRIAL_TTL_SEC）</label>
    <input class="w-full border rounded p-2 mt-1" type="number" min="10" step="1" name="TRIAL_TTL_SEC" value="{{ trial_ttl_sec }}" />
    <p class="text-xs text-gray-500 mt-1">現在実行中の試行が占有できる最大秒数。/explore と /guess で更新され、タイムアウトで解放されます。</p>
  </div>
  <div>
    <label class="block text-sm font-medium text-gray-800">ログディレクトリ（LOG_DIR）</label>
    <input class="w-full border rounded p-2 mt-1" type="text" name="LOG_DIR" value="{{ log_dir }}" />
    <p class="text-xs text-gray-500 mt-1">JSONL 形式のHTTPログ出力先。相対パスは minotaur/ 配下に解決されます。</p>
  </div>
  <div class="flex justify-end space-x-2 pt-1">
    <button type="button" class="px-3 py-1.5 bg-gray-200 rounded" onclick="closeModal()">キャンセル</button>
    <button class="px-3 py-1.5 bg-blue-600 text-white rounded" type="submit">保存</button>
  </div>
</form>
