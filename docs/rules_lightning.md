## ICFP プログラミング・コンテスト 2025 — タスク概要
### 背景
アドソとウィリアムの両名が舞台となる図書館「Ædificium（エディフィシウム）」にたどり着きます。そこは聖なる「評価の秩序」の修道士たちが管理する図書館で、「ラムダの図書館」として世界中の関数が収められていると言われています。しかし、図書館の外観はまるで要塞のようで、所長のアボットと司書アロンゾ・オブ・カリーによって厳重に守られており、アドソとウィリアムは国際関数型プログラミング会議の混乱に乗じて忍び込むしかありません。
この Ædificium は巨大で複雑に入り組んでおり、どの部屋と通路を通るかはアボットとアロンゾだけが完全に把握しています。迷信を嫌うウィリアムは「我々は知る必要がある、我々は知るだろう」というヒルベルトの言葉（独語: “Wir müssen wissen, wir werden wissen!”）を胸に挑戦を進めます。一方のアドソは「地図もないまま、どうやって進めば…？」と不安を漏らしますが、ウィリアムは “Well, my dear Adso, we shall have to make one.” と答えます。

---

### Ædificium の構造と課題の本質

- Ædificium は六角形の部屋で構成されており、各辺に 1〜6 の番号付きの扉があります。
- 各扉は別の部屋につながっており（出入口は一対一対応しています）、複数の扉が同じ部屋に通じていたり、同じ扉から元の部屋に戻ることもありえます。
- 各部屋にはラベル（識別子）が付いていますが、アドソには読めません。ウィリアムは読めますが視力が衰えており、ラベルの最初の2ビット（要するに 2-bit 整数）しか認識できません。ラベルは重複することがあります。

**課題** <br>アドソとウィリアムは「ルート・プラン」を立て、一連の扉番号（0～5）で始まりの部屋から通過ルートを指定して、何度か探索を行います。ルート・プランを実行すると、アドソは各部屋でウィリアムが読み取れる 2-bit 整数を記録します（ルート・プランの長さ x に対し、x 個の 2-bit 整数が得られる）。
最終的な目標は、この情報をもとに可能な限り少ない探索回数で Ædificium の正確な地図（無向グラフとしての形状）を構築することです。

---

### プロトコル（通信フォーマット）
コンテスト中は、以下のような HTTP API を通じて課題を進行します：

1. **POST`/register`** — チーム登録用
  - リクエスト:<br>`{"name": string, "pl": string, "email": string}`
  - レスポンス:`{"id": string}`<br>この`id`はチーム固有の識別子として以降のリクエストに必要です（絶対に公開しないでください）。
2. **POST`/select`** — 問題選択
  - リクエスト:<br>`{"id": string, "problemName": string}`
  - レスポンス:`{"problemName": string}`<br>利用可能な問題リストはリーダーボードページに掲載されています。部屋数や構造は選ぶたびランダム生成されます。簡易な「probatio」という名前の 3 部屋だけの問題もあります。
3. **POST`/explore`** — 探索実行
  - リクエスト:<br>`{"id": string, "plans": [string]}`
  - レスポンス:
    ```
    cpp
    コードをコピーする
    {"results": [[int], …],"queryCount":int}
    ```
  `plans`は一連のルート・プラン（例:`"0325"`）のリスト。結果として、各ルート・プラン実行に対応するウィリアムの記録（2-bit 整数列）が得られます。`queryCount`はこれまでの探索回数。複数プランをまとめて投げられますが、1 リクエストにつき +1 追加ペナルティあり。
4. **POST`/guess`** — 地図の提出
  - リクエスト:
    ```
    csharp
    コードをコピーする
    {"id":string,"map": {"rooms": [int],"startingRoom":int,"connections": [
          {"from": {"room":int,"door":int},"to": {"room":int,"door":int}},
          …
        ]
      }
    }
    ```
  - レスポンス:`{"correct": boolean}`<br>`rooms`は各部屋の 2-bit ラベル、`startingRoom`は開始部屋のインデックス、`connections`はどの部屋のどの扉がどこに接続しているかの記述です。無向グラフなので重複接続は不要。`correct`が`true`なら成功。正解でかつ探索回数が最小記録を更新した場合はスコア更新。提出後は問題選択状態がリセットされます。

---

### スコアリング

- 正解マップを提出するまでに必要な探索回数`queryCount`が少ないほど、ローカルリーダーボードで順位が上がります。
- グローバルリーダーボードでは各問題ごとに他チームより順位が良いチーム数分のポイントが加算され（ボルダ方式）、全問題の合計ポイントで総合順位が決まります。
- リーダーボードはコンテスト中随時更新されますが、ライトニングラウンド直前（最後の 2 時間）および終了直前の 2 時間は更新が停止されます。

---

### 提出方法・締切

- 賞の対象とするには、Google フォーム経由でコードを提出してください。登録後の`id`と、コードの Git リポジトリ等へのリンクを記載します。公開はコンテスト終了後に。
- 提出締切はコンテスト終了後 3 時間以内。ライトニングラウンドの分も含めて 1 つのフォームで提出可能ですが、README に初日分とライトニングラウンド分の区別を記載してください。
- 「審査員賞」もあるため、トップになることが唯一の賞獲得手段ではありません。